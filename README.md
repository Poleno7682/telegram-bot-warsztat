# Telegram Bot - Auto Service Booking System

–°–∏—Å—Ç–µ–º–∞ –∑–∞–ø–∏—Å–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤ –Ω–∞ –∞–≤—Ç–æ—Å–µ—Ä–≤–∏—Å —á–µ—Ä–µ–∑ Telegram Bot —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –¥–≤—É—Ö —è–∑—ã–∫–æ–≤ (–ø–æ–ª—å—Å–∫–∏–π/—Ä—É—Å—Å–∫–∏–π).

–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø—Ä–æ–µ–∫—Ç–∞: [github.com/Poleno7682/telegram-bot-warsztat](https://github.com/Poleno7682/telegram-bot-warsztat)

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç —Å–ª–µ–¥—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø–∞–º **—á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã** —Å —á–µ—Ç–∫–∏–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –Ω–∞ frontend –∏ backend:

```
Telegram-Bot-Warsztat/
‚îú‚îÄ‚îÄ üì± frontend (Bot UI Layer)            # Telegram Bot –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ   ‚îî‚îÄ‚îÄ handlers/                         # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ keyboards/                        # –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã –∏ –∫–Ω–æ–ø–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ states/                           # FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ middlewares/                      # Middleware —Å–ª–æ–π
‚îÇ
‚îú‚îÄ‚îÄ ‚öôÔ∏è backend (Business Logic Layer)     # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ services/                         # –°–µ—Ä–≤–∏—Å—ã (SOLID)
‚îÇ   ‚îú‚îÄ‚îÄ repositories/                     # –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (Repository Pattern)
‚îÇ   ‚îú‚îÄ‚îÄ models/                           # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îÇ   ‚îî‚îÄ‚îÄ core/                             # –Ø–¥—Ä–æ (i18n, config)
‚îÇ
‚îú‚îÄ‚îÄ üöÄ Launcher Scripts
‚îÇ   ‚îú‚îÄ‚îÄ run_bot.py                        # Python launcher
‚îÇ   ‚îú‚îÄ‚îÄ run_bot.bat                       # Windows launcher
‚îÇ   ‚îú‚îÄ‚îÄ run_bot.sh                        # Linux/Mac launcher
‚îÇ   ‚îú‚îÄ‚îÄ setup_windows.bat                 # Windows setup
‚îÇ   ‚îî‚îÄ‚îÄ setup_linux.sh                    # Linux/Mac setup
‚îÇ
‚îú‚îÄ‚îÄ üöÄ Deployment
‚îÇ   ‚îú‚îÄ‚îÄ deployment/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ systemd/                     # systemd unit files
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logrotate/                    # logrotate configs
‚îÇ
‚îî‚îÄ‚îÄ üìö Documentation
    ‚îú‚îÄ‚îÄ README.md                         # This file
    ‚îú‚îÄ‚îÄ backend/README.md                 # Backend docs
    ‚îú‚îÄ‚îÄ backend/QUICKSTART.md             # Quick start guide
    ‚îî‚îÄ‚îÄ backend/DEPLOYMENT.md             # Deployment guide
```

## üìã –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### Frontend (Telegram Bot UI ‚Äì `backend/app/bot/`)

```
backend/app/bot/
‚îú‚îÄ‚îÄ handlers/                       # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π (UI –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã)
‚îÇ   ‚îú‚îÄ‚îÄ start.py                   # –ö–æ–º–∞–Ω–¥–∞ /start, –ø–µ—Ä–≤–∏—á–Ω—ã–π –≤—ã–±–æ—Ä —è–∑—ã–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ common.py                  # –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é, –Ω–∞–≤–∏–≥–∞—Ü–∏—è, –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ callback
‚îÇ   ‚îú‚îÄ‚îÄ booking.py                 # –°–æ–∑–¥–∞–Ω–∏–µ –∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π (FSM)
‚îÇ   ‚îú‚îÄ‚îÄ mechanic.py                # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–µ—Ö–∞–Ω–∏–∫–∞, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ calendar.py                # –ö–∞–ª–µ–Ω–¥–∞—Ä—å –∑–∞–ø–∏—Å–µ–π –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞/–º–µ—Ö–∞–Ω–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ user_settings.py           # –õ–∏—á–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—è–∑—ã–∫ –∏ –¥—Ä.)
‚îÇ   ‚îú‚îÄ‚îÄ health.py                  # /health –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∂–∏–≤–æ—Å—Ç–∏ –±–æ—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ admin/                     # –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ (–ø–æ–¥–ø–∞–∫–µ—Ç)
‚îÇ       ‚îú‚îÄ‚îÄ services.py            # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å–ª—É–≥–∞–º–∏
‚îÇ       ‚îú‚îÄ‚îÄ mechanics.py           # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ö–∞–Ω–∏–∫–∞–º–∏
‚îÇ       ‚îú‚îÄ‚îÄ users.py               # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
‚îÇ       ‚îî‚îÄ‚îÄ settings.py            # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ (—á–∞—Å—ã —Ä–∞–±–æ—Ç—ã, —à–∞–≥ –≤—Ä–µ–º–µ–Ω–∏ –∏ —Ç.–ø.)
‚îÇ
‚îú‚îÄ‚îÄ keyboards/                      # UI —ç–ª–µ–º–µ–Ω—Ç—ã (–∫–Ω–æ–ø–∫–∏)
‚îÇ   ‚îî‚îÄ‚îÄ inline.py                  # Inline-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã (–º–µ–Ω—é, –≤—ã–±–æ—Ä –¥–∞—Ç/–≤—Ä–µ–º–µ–Ω–∏, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è)
‚îÇ
‚îú‚îÄ‚îÄ states/                         # FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –¥–∏–∞–ª–æ–≥–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ booking.py                 # –°–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ –∑–∞–ø–∏—Å–∏ –∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏
‚îÇ
‚îî‚îÄ‚îÄ middlewares/                    # Middleware —Å–ª–æ–π
    ‚îú‚îÄ‚îÄ auth.py                    # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –∏–Ω—ä–µ–∫—Ü–∏—è User
    ‚îú‚îÄ‚îÄ i18n.py                    # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞, –∑–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–≤
    ‚îú‚îÄ‚îÄ db.py                      # –ò–Ω–∂–µ–∫—Ü–∏—è AsyncSession
    ‚îî‚îÄ‚îÄ error_handler.py           # –ì–ª–æ–±–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ aiogram/–ë–î
```

### Backend (Business Logic ‚Äì `backend/app/`)

```
backend/app/
‚îú‚îÄ‚îÄ services/              # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (SOLID Services)
‚îÇ   ‚îú‚îÄ‚îÄ auth_service.py           # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ booking_service.py        # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å—è–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ time_service.py           # –†–∞—Å—á–µ—Ç —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
‚îÇ   ‚îú‚îÄ‚îÄ translation_service.py    # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥
‚îÇ   ‚îî‚îÄ‚îÄ notification_service.py   # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ
‚îú‚îÄ‚îÄ repositories/          # –î–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º (Repository Pattern)
‚îÇ   ‚îú‚îÄ‚îÄ base.py           # –ë–∞–∑–æ–≤—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (CRUD)
‚îÇ   ‚îú‚îÄ‚îÄ user.py           # –†–∞–±–æ—Ç–∞ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ service.py        # –†–∞–±–æ—Ç–∞ —Å —É—Å–ª—É–≥–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ booking.py        # –†–∞–±–æ—Ç–∞ —Å –∑–∞–ø–∏—Å—è–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ settings.py       # –°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚îÇ
‚îú‚îÄ‚îÄ models/                # SQLAlchemy –º–æ–¥–µ–ª–∏ (Data Layer)
‚îÇ   ‚îú‚îÄ‚îÄ user.py           # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å + —Ä–æ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ service.py        # –£—Å–ª—É–≥–∏ –∞–≤—Ç–æ—Å–µ—Ä–≤–∏—Å–∞
‚îÇ   ‚îú‚îÄ‚îÄ booking.py        # –ó–∞–ø–∏—Å–∏ + —Å—Ç–∞—Ç—É—Å—ã
‚îÇ   ‚îî‚îÄ‚îÄ settings.py       # –°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚îÇ
‚îú‚îÄ‚îÄ core/                  # –Ø–¥—Ä–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ i18n/             # –°–∏—Å—Ç–µ–º–∞ –º–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ loader.py     # –ó–∞–≥—Ä—É–∑—á–∏–∫ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –∏ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (get_text, get_text_bilingual)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ locales/      # JSON-—Ñ–∞–π–ª—ã –ø–µ—Ä–µ–≤–æ–¥–æ–≤ (pl.json, ru.json)
‚îÇ   ‚îú‚îÄ‚îÄ timezone_utils.py # –£—Ç–∏–ª–∏—Ç—ã —Ä–∞–±–æ—Ç—ã —Å —á–∞—Å–æ–≤—ã–º–∏ –ø–æ—è—Å–∞–º–∏ (UTC ‚Üî –ª–æ–∫–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è)
‚îÇ   ‚îú‚îÄ‚îÄ logging_config.py # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (structlog)
‚îÇ   ‚îú‚îÄ‚îÄ metrics.py        # –ü—Ä–æ—Å—Ç—ã–µ in-memory –º–µ—Ç—Ä–∏–∫–∏ (—Å—á–µ—Ç—á–∏–∫–∏/–≥–µ–π–¥–∂–∏)
‚îÇ   ‚îú‚îÄ‚îÄ rate_limiter.py   # –õ–∏–º–∏—Ç–µ—Ä —á–∞—Å—Ç–æ—Ç—ã –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ deferred_message_manager.py # –û—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –∑–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ service_factory.py# –§–∞–±—Ä–∏–∫–∞ –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ —Ç–µ—Å—Ç–∞—Ö –∏ –Ω–µ —Ç–æ–ª—å–∫–æ
‚îÇ
‚îî‚îÄ‚îÄ config/                # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
    ‚îú‚îÄ‚îÄ settings.py       # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (Pydantic)
    ‚îî‚îÄ‚îÄ database.py       # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ë–î
```

## ‚ú® –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### üéØ SOLID –∏ —Å–ª–æ–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

#### **Single Responsibility Principle (SRP)**
- ‚úÖ –ö–∞–∂–¥—ã–π service –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –æ–¥–Ω—É –∑–∞–¥–∞—á—É
- ‚úÖ `AuthService` - —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- ‚úÖ `BookingService` - —Ç–æ–ª—å–∫–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ `NotificationService` - —Ç–æ–ª—å–∫–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ!)

#### **Open/Closed Principle (OCP)**
- ‚úÖ –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —è–∑—ã–∫ (–ø—Ä–æ—Å—Ç–æ JSON —Ñ–∞–π–ª)
- ‚úÖ –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Ä–æ–ª—å
- ‚úÖ –†–∞—Å—à–∏—Ä—è–µ–º–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

#### **Liskov Substitution Principle (LSP)**
- ‚úÖ `BaseRepository` –≤–∑–∞–∏–º–æ–∑–∞–º–µ–Ω—è–µ–º —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏
- ‚úÖ –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã —Å–ª–µ–¥—É—é—Ç –µ–¥–∏–Ω–æ–º—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É

#### **Interface Segregation Principle (ISP)**
- ‚úÖ Middleware —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –ø–æ —Ñ—É–Ω–∫—Ü–∏—è–º
- ‚úÖ –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∏–º–µ—é—Ç —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã
- ‚úÖ –ù–µ—Ç "–∂–∏—Ä–Ω—ã—Ö" –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤

#### **Dependency Inversion Principle (DIP)**
- ‚úÖ Handlers –∑–∞–≤–∏—Å—è—Ç –æ—Ç —Å–µ—Ä–≤–∏—Å–æ–≤ (–∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π)
- ‚úÖ –°–µ—Ä–≤–∏—Å—ã –∑–∞–≤–∏—Å—è—Ç –æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ (–∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π)
- ‚úÖ –ù–∏–∫—Ç–æ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –¥–µ—Ç–∞–ª–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### üåç –ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç—å –∏ –≤—ã–±–æ—Ä —è–∑—ã–∫–∞

- –ü–æ–ª—å—Å–∫–∏–π –∏ —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫–∏ "–∏–∑ –∫–æ—Ä–æ–±–∫–∏"
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —è–∑—ã–∫–∏ (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å JSON –≤ `backend/app/core/i18n/locales/`)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥ –æ–ø–∏—Å–∞–Ω–∏–π (deep-translator) –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–ø–∏—Å–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ "—è–∑—ã–∫ –Ω–µ –≤—ã–±—Ä–∞–Ω" (`LANGUAGE_UNSET`) –∏ –¥–∏–∞–ª–æ–≥ –≤—ã–±–æ—Ä–∞ —è–∑—ã–∫–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–º–µ–Ω—ã —è–∑—ã–∫–∞ —á–µ—Ä–µ–∑ –º–µ–Ω—é "–ú–æ–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏"

### üë• –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π

- **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, —É—Å–ª—É–≥–∞–º–∏, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
- **–ú–µ—Ö–∞–Ω–∏–∫**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø–∏—Å–µ–π, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å–ª—É–≥–∞–º–∏
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**: –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π

### üìÖ –£–º–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–µ–º

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç —Å–≤–æ–±–æ–¥–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤
- –£—á–µ—Ç –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —É—Å–ª—É–≥–∏ + –±—É—Ñ–µ—Ä–Ω–æ–µ –≤—Ä–µ–º—è
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π —à–∞–≥ –≤—Ä–µ–º–µ–Ω–∏ (–∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–∏—Å—Ç–µ–º—ã)
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –±—É–¥—É—â–∏—Ö —Å–ª–æ—Ç–æ–≤, —É—á–∏—Ç—ã–≤–∞—è —Ç–µ–∫—É—â–µ–µ –ª–æ–∫–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—Ü–µ–Ω–∞—Ä–∏—è "–ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –¥—Ä—É–≥–æ–µ –≤—Ä–µ–º—è" –∫–∞–∫ –æ—Ç –º–µ—Ö–∞–Ω–∏–∫–∞, —Ç–∞–∫ –∏ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞

### ‚è∞ –ß–∞—Å–æ–≤—ã–µ –ø–æ—è—Å–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã

- –í—Å–µ —Ä–∞—Å—á–µ—Ç—ã –¥–µ–ª–∞—é—Ç –∞–∫—Ü–µ–Ω—Ç –Ω–∞ **–ª–æ–∫–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —Å–µ—Ä–≤–∏—Å–∞** (–Ω–∞–ø—Ä–∏–º–µ—Ä, Europe/Warsaw)
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã, –∑–∞–ø–∏—Å–∏ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º —á–∞—Å–æ–≤–æ–º –ø–æ—è—Å–µ, —á—Ç–æ–±—ã "08:00" –≤—Å–µ–≥–¥–∞ –æ–∑–Ω–∞—á–∞–ª–æ 8 —É—Ç—Ä–∞ –ø–æ –º–µ—Å—Ç–Ω–æ–º—É –≤—Ä–µ–º–µ–Ω–∏
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –º–æ–¥–µ–ª—å `SystemSettings` –≤ –ë–î (—á–∞—Å—ã —Ä–∞–±–æ—Ç—ã, —à–∞–≥, –±—É—Ñ–µ—Ä, —Ç–∞–π–º–∑–æ–Ω–∞, –≥–ª—É–±–∏–Ω–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—è)
- –ó–Ω–∞—á–µ–Ω–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —Å `.env` –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ, –∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–æ –≤ `.env`

### üß© –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –±–æ—Ç–∞

- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π `NotificationService` —Å rate limiter-–æ–º, —á—Ç–æ–±—ã –Ω–µ —Å–ø–∞–º–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –û—Ç–¥–µ–ª—å–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:
  - –æ —Å–æ–∑–¥–∞–Ω–∏–∏, –ø—Ä–∏–Ω—è—Ç–∏–∏, –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏ –∑–∞–ø–∏—Å–∏
  - –æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
  - –æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
- –ì–ª–æ–±–∞–ª—å–Ω—ã–π middleware `ErrorHandlerMiddleware`:
  - –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ Telegram API (–≤–∫–ª—é—á–∞—è "query is too old")
  - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–µ—Ç–µ–≤—ã–µ –∏ –ë–î-–æ—à–∏–±–∫–∏
  - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤–º–µ—Å—Ç–æ –ø–∞–¥–µ–Ω–∏—è –±–æ—Ç–∞

### ‚úÖ –¢–µ—Å—Ç—ã –∏ –º–µ—Ç—Ä–∏–∫–∏

- –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã –¥–ª—è —è–¥—Ä–∞ (–º–µ—Ç—Ä–∏–∫–∏, rate limiter, i18n/–ø–µ—Ä–µ–≤–æ–¥—ã)
- –ü—Ä–æ—Å—Ç–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–µ—Ç—Ä–∏–∫ `MetricsCollector` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –±–∞–∑–æ–≤—ã—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π

### üîÑ Workflow —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å
        ‚Üì
–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤—Å–µ–º –º–µ—Ö–∞–Ω–∏–∫–∞–º
        ‚Üì
–ú–µ—Ö–∞–Ω–∏–∫: –ü—Ä–∏–Ω—è—Ç—å / –û—Ç–∫–ª–æ–Ω–∏—Ç—å / –ò–∑–º–µ–Ω–∏—Ç—å –≤—Ä–µ–º—è
        ‚Üì
–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ ‚Üí –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
        ‚Üì
–ü–æ—Å–ª–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è ‚Üí –ó–∞–ø–∏—Å—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### Windows

```batch
REM 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞
setup_windows.bat

REM 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞
notepad backend\.env
REM –£–∫–∞–∂–∏—Ç–µ BOT_TOKEN –∏ ADMIN_IDS

REM 3. –ó–∞–ø—É—Å–∫
run_bot.bat
```

### Linux/Mac

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞
chmod +x setup_linux.sh run_bot.sh
./setup_linux.sh

# 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞
nano backend/.env
# –£–∫–∞–∂–∏—Ç–µ BOT_TOKEN –∏ ADMIN_IDS

# 3. –ó–∞–ø—É—Å–∫
./run_bot.sh
```

### Python –Ω–∞–ø—Ä—è–º—É—é

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞
cd backend
python3 -m pip install --upgrade pip --user
python3 -m pip install -r requirements.txt --user

# 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞
cp env.example .env
nano .env  # –£–∫–∞–∂–∏—Ç–µ BOT_TOKEN –∏ ADMIN_IDS

# 3. –ú–∏–≥—Ä–∞—Ü–∏–∏
mkdir -p db
python3 -m alembic upgrade head

# 4. –ó–∞–ø—É—Å–∫
cd ..
python3 run_bot.py
```

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [üìò QUICKSTART.md](backend/QUICKSTART.md) - –ü–æ–¥—Ä–æ–±–Ω—ã–π –≥–∞–π–¥ –ø–æ –∑–∞–ø—É—Å–∫—É –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- [üöÄ DEPLOYMENT.md](backend/DEPLOYMENT.md) - –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ VPS
- [‚öôÔ∏è Backend README](backend/README.md) - –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ backend

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Bot Framework**: aiogram 3.22.0 (async)
- **Database**: SQLAlchemy 2.0 + Alembic (async)
- **Translation**: deep-translator
- **Configuration**: pydantic-settings
- **Patterns**: Repository, Service Layer, Dependency Injection

## üì¶ Deployment

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É

**–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- RAM: 512MB
- Disk: 5GB
- CPU: 1 core
- OS: Linux (Ubuntu 20.04+, Debian 11+, Alpine 3.15+)

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- RAM: 2GB+
- Disk: 20GB+
- CPU: 2+ cores
- OS: Ubuntu 22.04 LTS –∏–ª–∏ Debian 12

### VPS (Linux)

```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
cd /opt
sudo git clone https://github.com/Poleno7682/telegram-bot-warsztat.git telegram-bot

# 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
cd telegram-bot/backend
sudo bash scripts/setup.sh

# 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–∞–∫ systemd service
sudo bash scripts/install_service.sh
```

### Systemd Service

–ë–æ—Ç —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∫–∞–∫ systemd service –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–∏—Å—Ç–µ–º—ã.

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–∞:**
```bash
cd /opt/telegram-bot/backend
sudo bash scripts/install_service.sh
```

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–º:**
```bash
# –ó–∞–ø—É—Å–∫
sudo systemctl start telegram-bot

# –°—Ç–∞—Ç—É—Å
sudo systemctl status telegram-bot

# –õ–æ–≥–∏ (real-time)
sudo journalctl -u telegram-bot -f
```

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [DEPLOYMENT.md](backend/DEPLOYMENT.md)

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —è–∑—ã–∫–∞

1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `backend/app/core/i18n/locales/{–∫–æ–¥}.json`
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏–∑ `pl.json`
3. –ü–µ—Ä–µ–≤–µ–¥–∏—Ç–µ –≤—Å–µ –∫–ª—é—á–∏
4. –ì–æ—Ç–æ–≤–æ! –Ø–∑—ã–∫ –¥–æ—Å—Ç—É–ø–µ–Ω –≤ –±–æ—Ç–µ

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π —É—Å–ª—É–≥–∏ (—á–µ—Ä–µ–∑ –±–æ—Ç–∞)

1. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –∏–ª–∏ –ú–µ—Ö–∞–Ω–∏–∫
2. –ú–µ–Ω—é ‚Üí –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å–ª—É–≥–∞–º–∏
3. –î–æ–±–∞–≤–∏—Ç—å —É—Å–ª—É–≥—É
4. –£–∫–∞–∂–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ (PL + RU), –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, —Ü–µ–Ω—É

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ß–µ—Ä–µ–∑ .env:**
```env
ADMIN_IDS=123456789,987654321
MECHANIC_IDS=111111111
USER_IDS=222222222
```

**–ß–µ—Ä–µ–∑ –±–æ—Ç–∞** (—Ç–æ–ª—å–∫–æ –¥–ª—è –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞):
1. –ú–µ–Ω—é –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ ‚Üí –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
2. –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è/–º–µ—Ö–∞–Ω–∏–∫–∞
3. –í–≤–µ—Å—Ç–∏ Telegram ID

## üêõ Troubleshooting

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `BOT_TOKEN` –≤ `.env`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω: `ps aux | grep python` –∏–ª–∏ `systemctl status telegram-bot`

### "User not authorized"
- –î–æ–±–∞–≤—å—Ç–µ —Å–≤–æ–π Telegram ID –≤ `ADMIN_IDS` –≤ `.env`
- –£–∑–Ω–∞—Ç—å ID: @userinfobot –≤ Telegram

### –û—à–∏–±–∫–∏ –ë–î
```bash
# –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –ë–î
cd backend
python3 -m alembic downgrade base
python3 -m alembic upgrade head
```

## üìù License

MIT

## ü§ù Contributing

Pull requests are welcome! For major changes, please open an issue first.

## üìß Support

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ Issues –≤ GitHub.

